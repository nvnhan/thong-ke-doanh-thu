(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{16:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(120),o=a(3),c=a.n(o);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.a=function(e){if(e.value&&"string"==typeof e.value){var t=c()(e.value,e.format);return r.a.createElement(l.a,i({},e,{value:t}))}return r.a.createElement(l.a,e)}},4:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return h})),a.d(t,"e",(function(){return p}));var n=a(3),r=a.n(n),l=a(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var u=function(e){var t=c(Object(l.useState)(e),2),a=t[0],n=t[1];return[a,function(e){return n((function(t){return Object.assign({},t,e)}))}]},m=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&(void 0===e[a]&&(e[a]=""),t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a])));return t.join("&")},s=function(e){for(var t=0,a=Object.entries(e);t<a.length;t++){var n=c(a[t],2),l=n[0],i=n[1];null!=i&&("object"===o(i)?e[l]=i.format("YYYY-MM-DD HH:mm:ss"):"string"==typeof i&&(i.match(/(.*?):(.*?)\/(.*?)\//g)?e[l]=r()(i,"HH:mm DD/MM/YYYY").format("YYYY-MM-DD HH:mm:ss"):i.match(/(.*?)\/(.*?)\//g)&&(e[l]=r()(i,"DD/MM/YYYY").format("YYYY-MM-DD HH:mm:ss"))))}return e},h=function(e,t){if(void 0===e||void 0===t)return!0;var a=!1;for(var n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&e[n]!==t[n]){a=!0;break}return a},p=new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"})},670:function(e,t,a){"use strict";a.r(t);var n=a(685),r=a(12),l=a(388),o=a(179),c=a(82),i=a(53),u=a(20),m=a(652),s=a(665),h=a(19),p=a(0),f=a.n(p),d=a(80),y=a(4),b=a(33),g=a(120),E=a(27),v=a(400),O=a(10),w=a(3),k=a.n(w),C=(a(16),b.a.Option),j=b.a.OptGroup,I=g.a.RangePicker,Y=f.a.memo((function(e){var t=e.danhMuc,a=t.taiKhoan,n=t.khachHang;return f.a.createElement(f.a.Fragment,null,f.a.createElement(i.a,{gutter:[5,5]},f.a.createElement(u.a,null,f.a.createElement("span",null,"Xử lý file Excel"))),f.a.createElement(i.a,{gutter:[5,5],style:{borderBottom:"1px solid rgba(0,0,0,.07)",marginBottom:"12px"}},f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_so_ve",label:"Cột số vé"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_ma_giu_cho",label:"Cột mã giữ chỗ"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_ten_khach",label:"Cột tên khách"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_loai_tuoi",label:"Cột loại tuổi"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_ngay_thang",label:"Cột ngày tháng"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_hanh_trinh",label:"Cột hành trình"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_ngay_bay",label:"Cột ngày bay"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_ma_dai_ly",label:"Cột mã đại lý"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_hoa_hong",label:"Cột hoa hồng"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_so_tien",label:"Cột số tiền"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"cot_thu_khach",label:"Cột thu khách"},f.a.createElement(E.a,null))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"xu_ly_tu_hang",label:"Xử lý từ hàng"},f.a.createElement(E.a,null)))),f.a.createElement(i.a,{gutter:[5,5]},f.a.createElement(u.a,{span:24,md:12},f.a.createElement(r.a.Item,{name:"thoiGian",label:"Thời gian",labelCol:{span:6},wrapperCol:{span:18}},f.a.createElement(I,{locale:O.a,style:{width:"100%"},ranges:{"Hôm nay":[k()().startOf("day"),k()().endOf("day")],"Tuần này":[k()().startOf("week"),k()().endOf("week")],"Tháng này":[k()().startOf("month"),k()().endOf("month")]},format:"DD/MM/YYYY",placeholder:["Nhập từ ngày","đến ngày"]}))),f.a.createElement(u.a,{span:24,md:12},f.a.createElement(r.a.Item,{name:"id_tai_khoan_mua",label:"Nơi mua",labelCol:{span:6},wrapperCol:{span:18}},f.a.createElement(b.a,{showSearch:!0,allowClear:!0,placeholder:"Chọn tài khoản / nhà cung cấp",filterOption:function(e,t){return!!t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},Object.entries(_.groupBy(a,"phan_loai")).map((function(e){return f.a.createElement(j,{label:e[0]||"Tài khoản ngân hàng",key:e[0]},e[1].map((function(e){return f.a.createElement(C,{value:e.id,key:e.id},e.ky_hieu)})))}))))),f.a.createElement(u.a,{span:24,md:12},f.a.createElement(r.a.Item,{name:"id_khach_hang",label:"Khách hàng MĐ",labelCol:{span:6},wrapperCol:{span:18}},f.a.createElement(b.a,{showSearch:!0,allowClear:!0,placeholder:"Khách hàng mặc định",filterOption:function(e,t){return!!t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},Object.entries(_.groupBy(n,"phan_loai")).map((function(e){return f.a.createElement(j,{label:e[0],key:e[0]},e[1].map((function(e){return f.a.createElement(C,{value:e.id,key:e.id},e.ma_khach_hang)})))}))))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"phi_thu_khach",label:"Phí thu khách"},f.a.createElement(v.a,{style:{width:"100%"},min:0,step:1e3,formatter:function(e){return"".concat(e,"₫").replace(/(?=(\d{3})+(?!\d))\B/g,",")},parser:function(e){return e.replace(/\₫\s?|(,*)/g,"")}}))),f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"khong_tinh_phi",label:"Ko tính phí"},f.a.createElement(v.a,{style:{width:"100%"},min:0,step:1e3,formatter:function(e){return"".concat(e,"₫").replace(/(?=(\d{3})+(?!\d))\B/g,",")},parser:function(e){return e.replace(/\₫\s?|(,*)/g,"")}})))),f.a.createElement(i.a,{gutter:[5,5]},f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{wrapperCol:{offset:12,span:12}},f.a.createElement(h.a,{htmlType:"submit",type:"primary"},"Xử lý")))))}));function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=f.a.memo(Object(d.g)((function(e){var t=M(r.a.useForm(),1)[0],a=M(Object(y.d)({taiKhoan:[],khachHang:[]}),2),d=a[0],b=a[1],g=M(Object(p.useState)((function(){var e={phi_thu_khach:0,khong_tinh_phi:0},t=localStorage.getItem("cot_excel");return void 0!==t&&Object.assign(e,JSON.parse(t)),e})),2),E=g[0],v=(g[1],M(Object(p.useState)([]),2)),O=v[0],w=v[1],k=!1,C=null;Object(p.useEffect)((function(){return k=!0,j(),function(){k=!1,C&&clearTimeout(C)}}),[]);var j=function e(){var t=axios.get("/api/tai-khoan/all"),a=axios.get("/api/khach-hang/all");console.log("Retrieving Danh Muc"),Promise.all([t,a]).then((function(t){k&&(t[0].data.success&&t[1].data.success?(b({taiKhoan:t[0].data.data,khachHang:t[1].data.data}),console.log("Retrieved Danh Muc Succcessfully")):C=setTimeout(e,2e3))})).catch((function(t){console.log(t),C=setTimeout(e,1e3)}))},I=["VN","VJ","Jets","BB"].map((function(e){return{value:e}}));return f.a.createElement("div",{className:"list-form",style:{padding:"16px 12px"}},f.a.createElement(r.a,{form:t,labelCol:{span:12},wrapperCol:{span:12},onFinish:function(){if(0!==O.length){l.a.info({title:"Thông báo",centered:!0,icon:null,okButtonProps:{hidden:!0},content:f.a.createElement("div",{style:{textAlign:"center"}},f.a.createElement(o.a,{percent:100,status:"active",showInfo:!1,strokeColor:"#6dc3a6"}),f.a.createElement("span",null,"Đang xử lý dữ liệu..."),f.a.createElement("br",null),f.a.createElement("small",null,f.a.createElement("i",null,"(Không thể hủy cho đến khi tiến trình kết thúc!)")))});var a,n=t.getFieldsValue();delete(a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){D(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n)).thoiGian,delete a.id_tai_khoan_mua,delete a.id_khach_hang,delete a.phi_thu_khach,delete a.khong_tinh_phi,delete a.ngay_thanh_toan,delete a.file,localStorage.setItem("cot_excel",JSON.stringify(a));var r=function(e){e.hasOwnProperty("thoiGian")&&!_.isEmpty(e.thoiGian)&&Object.assign(e,{bat_dau:e.thoiGian[0].format("YYYY-MM-DD"),ket_thuc:e.thoiGian[1].format("YYYY-MM-DD")});var t=new FormData;for(var a in t.append("file",O[0]),delete e.thoiGian,delete e.file,e)void 0!==e[a]&&t.append(a,e[a]);return t}(n);axios.post("/api/dat-ve/them-file",r,{headers:{"Content-Type":"multipart/form-data; charset=utf-8; boundary="+Math.random().toString().substr(2)}}).then((function(t){t.data.success?(c.a.success(t.data.message),e.history.push({pathname:"/dat-ve",dd:t.data.data})):c.a.error(t.data.message)})).catch((function(e){return console.log(e)})).then((function(){return l.a.destroyAll()}))}else c.a.warn("Chưa chọn file")},initialValues:E},f.a.createElement(i.a,{gutter:[5,5],style:{borderBottom:"1px solid rgba(0,0,0,.07)",marginBottom:"12px"}},f.a.createElement(u.a,{span:12,md:6},f.a.createElement(r.a.Item,{name:"hang_bay",label:"Hãng bay",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},f.a.createElement(m.a,{options:I,filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())}}))),f.a.createElement(u.a,{span:24,md:18},f.a.createElement(r.a.Item,{labelCol:{md:4},wrapperCol:{md:20},name:"file",label:"Chọn file"},f.a.createElement(s.a,{accept:".xls,.xlsx,.htm,.html",beforeUpload:function(e){return w([e]),!1},onRemove:function(e){w([])},fileList:O},f.a.createElement(h.a,null,f.a.createElement(n.a,null)," Tải lên"))))),f.a.createElement(Y,{danhMuc:d})))})))}}]);