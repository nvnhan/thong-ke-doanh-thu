(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{380:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(578),i=a(378),o=a.n(i);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.a=function(e){if(e.value&&"string"==typeof e.value){var t=o()(e.value,e.format);return r.a.createElement(l.a,c({},e,{value:t}))}return r.a.createElement(l.a,e)}},382:function(e,t,a){"use strict";var n={placeholder:"Chọn thời gian"};function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var l={lang:r({placeholder:"Chọn thời điểm",rangePlaceholder:["Ngày bắt đầu","Ngày kết thúc"]},{locale:"vi_VN",today:"Hôm nay",now:"Bây giờ",backToToday:"Trở về hôm nay",ok:"Ok",clear:"Xóa",month:"Tháng",year:"Năm",timeSelect:"Chọn thời gian",dateSelect:"Chọn ngày",weekSelect:"Chọn tuần",monthSelect:"Chọn tháng",yearSelect:"Chọn năm",decadeSelect:"Chọn thập kỷ",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Tháng trước (PageUp)",nextMonth:"Tháng sau (PageDown)",previousYear:"Năm trước (Control + left)",nextYear:"Năm sau (Control + right)",previousDecade:"Thập kỷ trước",nextDecade:"Thập kỷ sau",previousCentury:"Thế kỷ trước",nextCentury:"Thế kỷ sau"}),timePickerLocale:r({},n)};t.a=l},386:function(e,t,a){"use strict";var n=a(0),r=a(30),l=a(1),i=a.n(l),o=a(6),c=a(383),u=a(65),m=a(7);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=c.a.Option,d=c.a;function f(e){return e&&e.type&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var g=n.forwardRef((function(e,t){var a,l=e.prefixCls,g=e.className,y=e.children,b=e.dataSource,E=Object(r.a)(y),v=n.useRef();n.useImperativeHandle(t,(function(){return v.current})),1===E.length&&n.isValidElement(E[0])&&!f(E[0])&&(a=E[0]);var _,w=function(){return a};return _=E.length&&f(E[0])?y:b?b.map((function(e){if(n.isValidElement(e))return e;switch(s(e)){case"string":return n.createElement(p,{key:e,value:e},e);case"object":var t=e.value;return n.createElement(p,{key:t,value:t},e.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[],n.useEffect((function(){Object(m.a)(!("dataSource"in e),"AutoComplete","`dataSource` is deprecated, please use `options` instead."),Object(m.a)(!a||!("size"in e),"AutoComplete","You need to control style self instead of setting `size` when using customize input.")}),[]),n.createElement(u.a,null,(function(t){var a=(0,t.getPrefixCls)("select",l);return n.createElement(d,h({ref:v},Object(o.a)(e,["dataSource"]),{prefixCls:a,className:i()(g,"".concat(a,"-auto-complete")),mode:c.a.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:w}),_)}))}));g.Option=p,t.a=g},589:function(e,t,a){"use strict";a.r(t);var n=a(378),r=a.n(n),l=a(0),i=a.n(l),o=a(40),c=a(381),u=a(379),m=a(383),h=a(64),s=a(23),p=a(375),d=a(376),f=a(386),g=a(581),y=a(382),b=a(380),E=m.a.Option,v=m.a.OptGroup,w=i.a.memo((function(e){var t=(e.phanLoai||[]).map((function(e){return{value:e}})),a=e.nhaCungCap||[],n=Object.entries(_.groupBy(a,"phan_loai")),r=e.khachHang||[],l=Object.entries(_.groupBy(r,"phan_loai"));return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{gutter:[5,5]},i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"ngay_thang",label:"Ngày tháng",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},i.a.createElement(b.a,{style:{width:"100%"},locale:y.a,format:"DD/MM/YYYY"}))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"ma_visa",label:"Mã Visa",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},i.a.createElement(d.a,null))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"phan_loai",label:"Phân loại",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},i.a.createElement(f.a,{options:t,filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())}}))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"quoc_gia",label:"Quốc gia"},i.a.createElement(d.a,null))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"id_nha_cung_cap",label:"Nhà CC"},i.a.createElement(m.a,{showSearch:!0,allowClear:!0,placeholder:"Chọn nhà cung cấp",filterOption:function(e,t){return!!t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.map((function(e){return i.a.createElement(v,{label:e[0],key:e[0]},e[1].map((function(e){return i.a.createElement(E,{value:e.id,key:e.id},e.ky_hieu)})))}))))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"ngay_mua",label:"Ngày mua"},i.a.createElement(b.a,{style:{width:"100%"},locale:y.a,format:"DD/MM/YYYY"}))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"id_khach_hang",label:"Khách hàng"},i.a.createElement(m.a,{showSearch:!0,allowClear:!0,placeholder:"Chọn khách hàng",filterOption:function(e,t){return!!t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},l.map((function(e){return i.a.createElement(v,{label:e[0],key:e[0]},e[1].map((function(e){return i.a.createElement(E,{value:e.id,key:e.id},e.ma_khach_hang," - ",e.ho_ten)})))}))))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"ngay_tra_khach",label:"Ngày trả"},i.a.createElement(b.a,{style:{width:"100%"},locale:y.a,format:"DD/MM/YYYY"}))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"gia_mua",label:"Giá mua",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},i.a.createElement(g.a,{style:{width:"100%"},min:0,step:1e3,formatter:function(e){return"".concat(e,"₫").replace(/(?=(\d{3})+(?!\d))\B/g,",")},parser:function(e){return e.replace(/\₫\s?|(,*)/g,"")}}))),i.a.createElement(s.a,{span:24,md:8,sm:12},i.a.createElement(p.a.Item,{name:"gia_ban",label:"Giá bán",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},i.a.createElement(g.a,{style:{width:"100%"},min:0,step:1e3,formatter:function(e){return"".concat(e,"₫").replace(/(?=(\d{3})+(?!\d))\B/g,",")},parser:function(e){return e.replace(/\₫\s?|(,*)/g,"")}}))),i.a.createElement(s.a,{span:24,md:16},i.a.createElement(p.a.Item,{labelCol:{span:3},wrapperCol:{span:21},name:"ghi_chu",label:"Ghi chú"},i.a.createElement(d.a,null)))))}));function C(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw l}}return a}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var k=i.a.memo((function(e){var t=O(Object(l.useState)([]),2),a=t[0],n=t[1],o=O(Object(l.useState)({nhaCungCap:[],khachHang:[]}),2),m=o[0],h=o[1],s=m.nhaCungCap,p=m.khachHang;Object(l.useEffect)((function(){var e=axios.get("/api/nha-cung-cap"),t=axios.get("/api/khach-hang");Promise.all([e,t]).then((function(e){e[0].data.success&&e[1].data.success&&h({nhaCungCap:e[0].data.data,khachHang:e[1].data.data})}))}),[]);var d=[{title:"Ngày tháng",dataIndex:"ngay_thang",width:120,sorter:function(e,t){return r()(e.ngay_thang,"DD/MM/YYYY").unix()-r()(t.ngay_thang,"DD/MM/YYYY").unix()}},{title:"Mã Visa",dataIndex:"ma_visa",optFind:!0,width:150},{title:"Phân loại",dataIndex:"phan_loai",optFilter:!0,width:120},{title:"Quốc gia",dataIndex:"quoc_gia",optFind:!0,width:120},{title:"Nhà cung cấp",dataIndex:"nha_cung_cap",optFilter:!0,width:150},{title:"Khách hàng",dataIndex:"ten_khach_hang",optFilter:!0,width:150},{title:"Lãi",dataIndex:"lai",render:function(e){return u.e.format(e)},width:120,sorter:function(e,t){return e.lai-t.lai}},{title:"Tình trạng",dataIndex:"tinh_trang",width:120,optFilter:!0},{title:"Ghi chú",dataIndex:"ghi_chu",ellipsis:!0,width:150}];return i.a.createElement(c.a,{url:"visa",filterBox:!0,columns:d,tableSize:{x:800},modalWidth:"1100px",formTemplate:i.a.createElement(w,{phanLoai:a,nhaCungCap:s,khachHang:p}),formInitialValues:{gia_mua:0,gia_ban:0,ngay_thang:r()().format("DD/MM/YYYY")},onChangeData:function(e){var t=C(new Set(e.map((function(e){return e.phan_loai}))));n(t)},expandedRowRender:function(e){return i.a.createElement("ul",{style:{margin:0}},i.a.createElement("li",null,"Giá mua: ",u.e.format(e.gia_mua),". Ngày lấy nơi mua:"," ",e.ngay_mua),i.a.createElement("li",null,"Giá bán: ",u.e.format(e.gia_ban),". Ngày trả khách:"," ",e.ngay_tra_khach),i.a.createElement("li",null,"Đã thanh toán: ",u.e.format(e.da_thanh_toan),". Ngày thanh toán: ",e.ngay_thanh_toan),i.a.createElement("li",null,"Tình trạng: ",e.tinh_trang),i.a.createElement("li",null,"Ghi chú: ",e.ghi_chu),i.a.createElement("li",null,"Người tạo: ",e.username))}})}));t.default=Object(o.g)(k)}}]);