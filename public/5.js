(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{380:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(578),l=a(378),i=a.n(l);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.a=function(e){if(e.value&&"string"==typeof e.value){var t=i()(e.value,e.format);return r.a.createElement(o.a,c({},e,{value:t}))}return r.a.createElement(o.a,e)}},382:function(e,t,a){"use strict";var n={placeholder:"Chọn thời gian"};function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var o={lang:r({placeholder:"Chọn thời điểm",rangePlaceholder:["Ngày bắt đầu","Ngày kết thúc"]},{locale:"vi_VN",today:"Hôm nay",now:"Bây giờ",backToToday:"Trở về hôm nay",ok:"Ok",clear:"Xóa",month:"Tháng",year:"Năm",timeSelect:"Chọn thời gian",dateSelect:"Chọn ngày",weekSelect:"Chọn tuần",monthSelect:"Chọn tháng",yearSelect:"Chọn năm",decadeSelect:"Chọn thập kỷ",yearFormat:"YYYY",dateFormat:"D/M/YYYY",dayFormat:"D",dateTimeFormat:"D/M/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Tháng trước (PageUp)",nextMonth:"Tháng sau (PageDown)",previousYear:"Năm trước (Control + left)",nextYear:"Năm sau (Control + right)",previousDecade:"Thập kỷ trước",nextDecade:"Thập kỷ sau",previousCentury:"Thế kỷ trước",nextCentury:"Thế kỷ sau"}),timePickerLocale:r({},n)};t.a=o},386:function(e,t,a){"use strict";var n=a(0),r=a(30),o=a(1),l=a.n(o),i=a(6),c=a(383),u=a(65),m=a(7);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=c.a.Option,d=c.a;function f(e){return e&&e.type&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var g=n.forwardRef((function(e,t){var a,o=e.prefixCls,g=e.className,y=e.children,b=e.dataSource,v=Object(r.a)(y),E=n.useRef();n.useImperativeHandle(t,(function(){return E.current})),1===v.length&&n.isValidElement(v[0])&&!f(v[0])&&(a=v[0]);var _,w=function(){return a};return _=v.length&&f(v[0])?y:b?b.map((function(e){if(n.isValidElement(e))return e;switch(s(e)){case"string":return n.createElement(p,{key:e,value:e},e);case"object":var t=e.value;return n.createElement(p,{key:t,value:t},e.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}})):[],n.useEffect((function(){Object(m.a)(!("dataSource"in e),"AutoComplete","`dataSource` is deprecated, please use `options` instead."),Object(m.a)(!a||!("size"in e),"AutoComplete","You need to control style self instead of setting `size` when using customize input.")}),[]),n.createElement(u.a,null,(function(t){var a=(0,t.getPrefixCls)("select",o);return n.createElement(d,h({ref:E},Object(i.a)(e,["dataSource"]),{prefixCls:a,className:l()(g,"".concat(a,"-auto-complete")),mode:c.a.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:w}),_)}))}));g.Option=p,t.a=g},571:function(e,t,a){"use strict";var n=a(0),r={name:"appstore-add",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]}},o=a(3),l=function(e,t){return n.createElement(o.a,Object.assign({},e,{ref:t,icon:r}))};l.displayName="AppstoreAddOutlined";t.a=n.forwardRef(l)},587:function(e,t,a){"use strict";a.r(t);var n=a(571),r=a(383),o=a(378),l=a.n(o),i=a(0),c=a.n(i),u=a(40),m=a(381),h=a(379),s=a(64),p=a(23),d=a(375),f=a(376),g=a(386),y=a(581),b=a(374),v=a(382),E=a(380),w=r.a.Option,O=r.a.OptGroup,Y=c.a.memo((function(e){var t=(e.phanLoai||[]).map((function(e){return{value:e}})),a=e.khachHang||[],n=Object.entries(_.groupBy(a,"phan_loai"));return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{gutter:[5,5]},c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"ngay_thang",label:"Ngày tháng",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},c.a.createElement(E.a,{style:{width:"100%"},locale:v.a,format:"DD/MM/YYYY"}))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"ma_tour",label:"Mã Tour",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},c.a.createElement(f.a,null))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"ten_tour",label:"Tên Tour",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},c.a.createElement(f.a,null))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"phan_loai",label:"Phân loại",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},c.a.createElement(g.a,{options:t,filterOption:function(e,t){return-1!==t.value.toUpperCase().indexOf(e.toUpperCase())}}))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"bat_dau",label:"Bắt đầu"},c.a.createElement(E.a,{style:{width:"100%"},locale:v.a,format:"DD/MM/YYYY"}))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"ket_thuc",label:"Kết thúc"},c.a.createElement(E.a,{style:{width:"100%"},locale:v.a,format:"DD/MM/YYYY"}))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"so_luong",label:"Số lượng",rules:[{required:!0,message:"Nhập đầy đủ thông tin!"}]},c.a.createElement(y.a,{style:{width:"100%"},min:1,step:1,parser:function(e){return e.replace(/\₫\s?|\.(,*)/g,"")}}))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"gia_ban",label:"Giá bán"},c.a.createElement(y.a,{style:{width:"100%"},min:0,step:1e3,formatter:function(e){return"".concat(e,"₫").replace(/(?=(\d{3})+(?!\d))\B/g,",")},parser:function(e){return e.replace(/\₫\s?|(,*)/g,"")}}))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{name:"id_khach_hang",label:"Khách hàng"},c.a.createElement(r.a,{showSearch:!0,placeholder:"Chọn khách hàng",filterOption:function(e,t){return!!t.children&&t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.map((function(e){return c.a.createElement(O,{label:e[0],key:e[0]},e[1].map((function(e){return c.a.createElement(w,{value:e.id,key:e.id},e.ma_khach_hang)})))}))))),c.a.createElement(p.a,{span:24,md:16,sm:12},c.a.createElement(d.a.Item,{labelCol:{md:3,span:6},wrapperCol:{md:21,span:18},name:"ghi_chu",label:"Ghi chú"},c.a.createElement(f.a,null))),c.a.createElement(p.a,{span:24,md:8,sm:12},c.a.createElement(d.a.Item,{wrapperCol:{sm:{offset:6,span:18}},name:"hoan_thanh",valuePropName:"checked"},c.a.createElement(b.a,null,"Đã hoàn thành")))))}));function S(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}r.a.Option;var I=c.a.memo((function(e){var t=C(Object(i.useState)([]),2),a=t[0],r=t[1],o=C(Object(i.useState)([]),2),u=o[0],s=o[1];Object(i.useEffect)((function(){axios.get("/api/khach-hang").then((function(e){e.data.success&&s(e.data.data)})).catch((function(e){return console.log(e)}))}),[]);var p=[{title:"Ngày tháng",dataIndex:"ngay_thang",width:120,sorter:function(e,t){return l()(e.ngay_thang,"DD/MM/YYYY").unix()-l()(t.ngay_thang,"DD/MM/YYYY").unix()}},{title:"Mã tour",dataIndex:"ma_tour",optFind:!0,width:140},{title:"Tên tour",dataIndex:"ten_tour",width:170,optFind:!0},{title:"Phân loại",dataIndex:"phan_loai",width:140,optFilter:!0},{title:"Giá tour",dataIndex:"gia_tour",render:function(e){return h.e.format(e)},sorter:function(e,t){return e.gia_tour-t.gia_tour},width:120},{title:"Giá bán",dataIndex:"gia_ban",render:function(e){return h.e.format(e)},sorter:function(e,t){return e.gia_ban-t.gia_ban},width:120},{title:"Lãi",dataIndex:"lai",render:function(e){return h.e.format(e)},sorter:function(e,t){return e.lai-t.lai},width:120},{title:"Khách hàng",dataIndex:"ten_khach_hang",width:120,optFilter:!0},{title:"Tình trạng",dataIndex:"tinh_trang",width:120,optFilter:!0},{title:"Ghi chú",dataIndex:"ghi_chu",ellipsis:!0,width:170}],d=[{key:"dsTourChiTiet",onClick:function(t){e.history.push({pathname:"/tour-chi-tiet",tour:t})},title:"Tour chi tiết",icon:c.a.createElement(n.a,null),color:"#52c41a"}];return c.a.createElement(m.a,{url:"tour",filterBox:!0,columns:p,tableSize:{x:1200},modalWidth:"1100px",formTemplate:c.a.createElement(Y,{phanLoai:a,khachHang:u}),formInitialValues:{so_luong:1,ngay_thang:l()().format("DD/MM/YYYY")},otherActions:d,onChangeData:function(e){var t=S(new Set([].concat(S(e.map((function(e){return e.phan_loai}))),["Tour quốc nội","Vé máy bay"])));r(t)},expandedRowRender:function(e){return c.a.createElement("ul",{style:{margin:0}},c.a.createElement("li",null,"Bắt đầu: ",e.bat_dau,". Kết thúc: ",e.ket_thuc),c.a.createElement("li",null,"Giá tour: ",h.e.format(e.gia_tour),". Số lượng:"," ",e.so_luong),c.a.createElement("li",null,"Giá bán: ",h.e.format(e.gia_ban),". Tổng tiền bán:"," ",h.e.format(e.tong_tien_ban)),c.a.createElement("li",null,"Đã thanh toán: ",h.e.format(e.da_thanh_toan),". Ngày thanh toán: ",e.ngay_thanh_toan),c.a.createElement("li",null,"Tình trạng: ",e.tinh_trang),c.a.createElement("li",null,"Ghi chú: ",e.ghi_chu),c.a.createElement("li",null,"Người tạo: ",e.username))}})}));t.default=Object(u.g)(I)}}]);